(rustup target list | grep "riscv64gc-unknown-none-elf (installed)") || rustup target add riscv64gc-unknown-none-elf
riscv64gc-unknown-none-elf (installed)
cargo install cargo-binutils
rustup component add rust-src
rustup component add llvm-tools-preview
[kernel] Section bss cleared.
[kernel] UART initialized.
[kernel] Heap initialized.
[kernel] Frame allocator initialized.
[page_table] Root of page table is 0x80244000.
[buddy] Allocate 0x8002a000.
[buddy] Allocate 0x8002b000.
[buddy] Allocate 0x8002c000.
[buddy] Allocate 0x8002d000.
[buddy] Allocate 0x8002e000.
[buddy] Allocate 0x8002f000.
[mem] Map area [0x80000000, 0x80024000)
[mem] Map area [0x80024000, 0x8002a000)
[buddy] Allocate 0x80030000.
[buddy] Allocate 0x80031000.
[mem] Map area [0x8002a000, 0x8022b000)
[mem] Map area [0x8022b000, 0x80244000)
[mem] Map area [0x80244000, 0x88000000)
[mem] Map area [0x10000000, 0x10001000)
[mem] Map area [0x10001000, 0x10002000)
[kernel] Page table activated.
[buddy] Allocate 0x80036000.
.
..
args
cat
echo
exec
fork
hello_world
infloop
infyield
initproc
kill
ls
mkdir
pipe
rdwr
shell
touch
threads
[kernel] Begin to run kernel tasks.
[buddy] Allocate 0x80037000.
[buddy] Allocate 0x80032000.
[buddy] Allocate 0x80033000.
[buddy] Allocate 0x80038000.
[buddy] Allocate 0x80039000.
[buddy] Allocate 0x8003a000.
[buddy] Allocate 0x8003b000.
[buddy] Allocate 0x8003c000.
[buddy] Allocate 0x8003d000.
[buddy] Allocate 0x8003e000.
[buddy] Allocate 0x8003f000.
[buddy] Allocate 0x80040000.
[buddy] Allocate 0x80041000.
[buddy] Allocate 0x8008a000.
[buddy] Allocate 0x8008b000.
[buddy] Allocate 0x8008c000.
[buddy] Allocate 0x8008d000.
[buddy] Allocate 0x8008e000.
[buddy] Allocate 0x8008f000.
[buddy] Allocate 0x80090000.
[buddy] Allocate 0x80091000.
[buddy] Allocate 0x80092000.
[buddy] Allocate 0x80093000.
[buddy] Allocate 0x80094000.
[buddy] Allocate 0x80095000.
[buddy] Allocate 0x80096000.
[buddy] Allocate 0x80097000.
[buddy] Allocate 0x80098000.
[buddy] Allocate 0x80099000.
[buddy] Allocate 0x8009a000.
[buddy] Allocate 0x8009b000.
[buddy] Allocate 0x8009c000.
[buddy] Allocate 0x8009d000.
[buddy] Allocate 0x8009e000.
[buddy] Allocate 0x8009f000.
[buddy] Allocate 0x800a0000.
[buddy] Allocate 0x800a1000.
[buddy] Allocate 0x800a2000.
[buddy] Allocate 0x800a3000.
[buddy] Allocate 0x800a4000.
[buddy] Allocate 0x800a5000.
[buddy] Allocate 0x800a6000.
[buddy] Allocate 0x800a7000.
[buddy] Allocate 0x800a8000.
[buddy] Allocate 0x800a9000.
[buddy] Allocate 0x8004a000.
[buddy] Allocate 0x8004b000.
[buddy] Allocate 0x8004c000.
[buddy] Allocate 0x8004d000.
[buddy] Allocate 0x8004e000.
[buddy] Allocate 0x8004f000.
[buddy] Allocate 0x80050000.
[buddy] Allocate 0x80051000.
[buddy] Allocate 0x80052000.
[buddy] Allocate 0x80053000.
[buddy] Allocate 0x80054000.
[buddy] Allocate 0x80055000.
[buddy] Allocate 0x80056000.
[buddy] Allocate 0x80057000.
[buddy] Allocate 0x80058000.
[buddy] Allocate 0x80059000.
[buddy] Allocate 0x8005a000.
[buddy] Allocate 0x8005b000.
[buddy] Allocate 0x8005c000.
[buddy] Allocate 0x8005d000.
[buddy] Allocate 0x8005e000.
[buddy] Allocate 0x8005f000.
[buddy] Allocate 0x80060000.
[buddy] Allocate 0x80061000.
[buddy] Allocate 0x80062000.
[buddy] Allocate 0x80063000.
[buddy] Allocate 0x80064000.
[buddy] Allocate 0x80065000.
[buddy] Allocate 0x80066000.
[buddy] Allocate 0x80067000.
[buddy] Allocate 0x80068000.
[buddy] Allocate 0x80069000.
[buddy] Allocate 0x8006a000.
[buddy] Allocate 0x8006b000.
[buddy] Allocate 0x8006c000.
[buddy] Allocate 0x8006d000.
[buddy] Allocate 0x8006e000.
[buddy] Allocate 0x8006f000.
[buddy] Allocate 0x80070000.
[buddy] Allocate 0x80071000.
[buddy] Deallocate 0x80032000.
[page_table] Root of page table is 0x8028c000.
[mem] Start va is 0x10000 and end va is 0x1287a
[mem] Map area [0x10000, 0x13000)
[mem] Start va is 0x13000 and end va is 0x139a8
[mem] Map area [0x13000, 0x14000)
[mem] Start va is 0x14000 and end va is 0x184a1
[mem] Map area [0x14000, 0x19000)
[trap] User's sepc is 0x10000
[mem] Map area [0xfffffffffffdf000, 0xfffffffffffef000)
0xffffffffffffe000 0xfffffffffffff000
[mem] Map area [0xffffffffffffe000, 0xfffffffffffff000)
[mem] Map area [0x1a000, 0x2a000)
[trap] User's sp: 0x2a000
[page_table] Root of page table is 0x802bb000.
[mem] Map area [0x10000, 0x13000)
[mem] Map area [0x13000, 0x14000)
[mem] Map area [0x14000, 0x19000)
[mem] Map area [0xfffffffffffcf000, 0xfffffffffffdf000)
[mem] Map area [0xffffffffffffe000, 0xfffffffffffff000)
[mem] Map area [0x1a000, 0x2a000)
[buddy] Allocate 0x80032000.
[kernel] Fork a new process with pid 2.
[kernel] Try exec a new program.
[kernel] Exec a new program.
[page_table] Root of page table is 0x802ea000.
[mem] Start va is 0x10000 and end va is 0x16cc6
[mem] Map area [0x10000, 0x17000)
[mem] Start va is 0x17000 and end va is 0x185a8
[mem] Map area [0x17000, 0x19000)
[mem] Start va is 0x19000 and end va is 0x1d4ea
[mem] Map area [0x19000, 0x1e000)
0xffffffffffffe000 0xfffffffffffff000
[mem] Map area [0xffffffffffffe000, 0xfffffffffffff000)
[mem] Map area [0x1f000, 0x2f000)
[trap] User's sp: 0x2f000
[mem] Unmap area [0xffffffffffffe000, 0xfffffffffffff000)
[mem] Unmap area [0x1a000, 0x2a000)
write 0x0 in 0x2eff8
page_table: 0x80000000000802ea result: 0x0
[mem] Unmap area [0x10000, 0x13000)
[mem] Unmap area [0x13000, 0x14000)
[mem] Unmap area [0x14000, 0x19000)
/ > threads
[page_table] Root of page table is 0x802c8000.
[mem] Map area [0x10000, 0x17000)
[mem] Map area [0x17000, 0x19000)
[mem] Map area [0x19000, 0x1e000)
[mem] Map area [0xfffffffffffbf000, 0xfffffffffffcf000)
[mem] Map area [0xffffffffffffe000, 0xfffffffffffff000)
[mem] Map area [0x1f000, 0x2f000)
[kernel] Fork a new process with pid 3.
QEMU: Terminated
